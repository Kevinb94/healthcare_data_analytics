# 🧱 Data Models (dbt)

This folder contains all the **dbt models** used to cleanse, deduplicate, and normalize the raw healthcare data generated by [Synthea](https://synthetichealth.github.io/synthea/).

These models are the foundation for all downstream analysis and BI reporting. They transform the raw Synthea CSV data into structured, queryable tables in the **DuckDB** data warehouse.

---

## 📁 Folder Purpose

- Transform raw Synthea data into consistent, analytics-ready models
- Standardize column naming, formats, and table structures
- Remove duplicate or incomplete records
- Create layered dbt models (e.g., staging → marts)
- Power the queries found in the `/analysis` folder
- Feed clean data into the Metabase dashboards

---

## 🧱 dbt Model Layers

We use a modular approach inspired by best practices:

```
/data_models/
  ├── staging/        # Raw source transformations (cleansing, renaming)
  ├── intermediate/   # Joins, deduplication, enrichment
  └── marts/          # Final models for analysis and BI tools
```

---

## ⚙️ Example Models

| Model Name                   | Description                                      |
|------------------------------|--------------------------------------------------|
| `stg_patients.sql`           | Cleaned and renamed patient demographics         |
| `int_encounters_conditions`  | Joins encounters with condition history          |
| `mart_patient_summary`       | Final patient snapshot with visits and costs     |

> All models are written in `.sql` using dbt-compatible Jinja templating.

---

## 🛠 Dependencies

- [dbt-core](https://docs.getdbt.com/) installed in the environment
- DuckDB profile in your `profiles.yml`
- Raw Synthea data ingested into DuckDB tables (via CLI, Python, or Docker)

---

## 🧠 Related Folders

- `/analysis` – queries that rely on the models defined here
- `/duckdb_data_warehouse` – contains the DuckDB file used as the warehouse
- `/metabase_dashboards` – uses these models for BI visualization

---

## 🚀 Getting Started

From your project root:

```bash
dbt debug
dbt run
dbt test
```

---

## 🤝 Contributions

Follow the naming conventions and place each model in the appropriate layer (`staging`, `intermediate`, or `marts`). Include descriptions and comments to help others understand the transformations.

